execute unless entity @e[tag=boss_2] run function center_calculation:enemy_skill/boss_2/victory
execute unless entity @p[scores={boss.temp_deaths=0}] if entity @e[tag=boss_2] run function center_calculation:enemy_skill/boss_2/failed
execute store result bossbar boss_2 value run data get entity @n[tag=boss_2] Health
scoreboard players set @a gamemode.scb 10
scoreboard players add @n[tag=boss_2] boss.skill_timing 1
scoreboard players set @n[tag=boss_2,scores={boss.skill_timing=1400..}] boss.skill_timing 0

execute if score @n[tag=boss_2] boss.skill_timing matches 100 run function center_calculation:enemy_skill/boss_2/skill_1
execute if score @n[tag=boss_2] boss.skill_timing matches 105 run function center_calculation:enemy_skill/boss_2/skill_1
execute if score @n[tag=boss_2] boss.skill_timing matches 110 run function center_calculation:enemy_skill/boss_2/skill_1

execute if score @n[tag=boss_2] boss.skill_timing matches 120..320 run function center_calculation:enemy_skill/boss_2/skill_1_apply
execute if score @n[tag=boss_2] boss.skill_timing matches 320 run team join green @n[tag=boss_2]

execute if score @n[tag=boss_2] boss.skill_timing matches 360 as @n[tag=boss_2] at @s run summon guardian ~10 ~4 ~ {attributes:[{base:10,id:max_health},{base:15,id:"attack_damage"},{base:40,id:follow_range}],NoGravity:1b,Health:10,Glowing:1b,Team:"aqua",active_effects:[{id:invisibility,duration:9999999,show_particles:0b,amplifier:0}],DeathLootTable:"",Tags:["b2_s2_enemy"]} 
execute if score @n[tag=boss_2] boss.skill_timing matches 380 as @n[tag=boss_2] at @s run summon guardian ~-10 ~4 ~ {attributes:[{base:10,id:max_health},{base:15,id:"attack_damage"},{base:40,id:follow_range}],NoGravity:1b,Health:10,Glowing:1b,Team:"aqua",active_effects:[{id:invisibility,duration:9999999,show_particles:0b,amplifier:0}],DeathLootTable:"",Tags:["b2_s2_enemy"]} 
execute if score @n[tag=boss_2] boss.skill_timing matches 400 as @n[tag=boss_2] at @s run summon guardian ~ ~4 ~10 {attributes:[{base:10,id:max_health},{base:15,id:"attack_damage"},{base:40,id:follow_range}],NoGravity:1b,Health:10,Glowing:1b,Team:"aqua",active_effects:[{id:invisibility,duration:9999999,show_particles:0b,amplifier:0}],DeathLootTable:"",Tags:["b2_s2_enemy"]} 
execute if score @n[tag=boss_2] boss.skill_timing matches 420 as @n[tag=boss_2] at @s run summon guardian ~ ~4 ~-10 {attributes:[{base:10,id:max_health},{base:15,id:"attack_damage"},{base:40,id:follow_range}],NoGravity:1b,Health:10,Glowing:1b,Team:"aqua",active_effects:[{id:invisibility,duration:9999999,show_particles:0b,amplifier:0}],DeathLootTable:"",Tags:["b2_s2_enemy"]} 

execute if score @n[tag=boss_2] boss.skill_timing matches 440 as @n[tag=boss_2] at @s run summon zombie ~4 ~ ~ {attributes:[{base:0.25,id:movement_speed},{base:28,id:max_health},{base:15,id:"attack_damage"}],Health:28,Glowing:1b,Team:"green",active_effects:[{id:invisibility,duration:9999999,show_particles:0b,amplifier:0}],DeathLootTable:"",equipment:{chest:{components:{"minecraft:dyed_color":6192150},count:1,id:"minecraft:leather_chestplate"},feet:{components:{"minecraft:dyed_color":6192150},count:1,id:"minecraft:leather_boots"},head:{components:{"minecraft:custom_name":{extra:[{bold:0b,color:"blue",italic:0b,obfuscated:0b,strikethrough:0b,text:"Mushroom",underlined:0b}],text:""},"minecraft:profile":{id:[I;67411088,-739686879,-1666252800,-1431756647],name:"",properties:[{name:"textures",value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYmNjYTFkYmRiYzEwYTMzMDhkZmNiZWE3NDlhNWQ5ZDRiOWI1NDIzYThhN2U2YTgxYjljZjFmMDBmZmRkYTQ3ZiJ9fX0="}]}},count:1,id:"minecraft:player_head"},legs:{components:{"minecraft:dyed_color":6192150},count:1,id:"minecraft:leather_leggings"}},drop_chances:{body:0,chest:0,feet:0,head:0,legs:0,mainhand:0,offhand:0},Tags:["b2_s2_enemy"]}
execute if score @n[tag=boss_2] boss.skill_timing matches 440 as @n[tag=boss_2] at @s run summon zombie ~ ~ ~-4 {attributes:[{base:0.25,id:movement_speed},{base:28,id:max_health},{base:15,id:"attack_damage"}],Health:28,Glowing:1b,Team:"green",active_effects:[{id:invisibility,duration:9999999,show_particles:0b,amplifier:0}],DeathLootTable:"",equipment:{chest:{components:{"minecraft:dyed_color":6192150},count:1,id:"minecraft:leather_chestplate"},feet:{components:{"minecraft:dyed_color":6192150},count:1,id:"minecraft:leather_boots"},head:{components:{"minecraft:custom_name":{extra:[{bold:0b,color:"blue",italic:0b,obfuscated:0b,strikethrough:0b,text:"Mushroom",underlined:0b}],text:""},"minecraft:profile":{id:[I;67411088,-739686879,-1666252800,-1431756647],name:"",properties:[{name:"textures",value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYmNjYTFkYmRiYzEwYTMzMDhkZmNiZWE3NDlhNWQ5ZDRiOWI1NDIzYThhN2U2YTgxYjljZjFmMDBmZmRkYTQ3ZiJ9fX0="}]}},count:1,id:"minecraft:player_head"},legs:{components:{"minecraft:dyed_color":6192150},count:1,id:"minecraft:leather_leggings"}},drop_chances:{body:0,chest:0,feet:0,head:0,legs:0,mainhand:0,offhand:0},Tags:["b2_s2_enemy"]} 
execute if score @n[tag=boss_2] boss.skill_timing matches 440 as @n[tag=boss_2] at @s run summon zombie ~-4 ~ ~ {attributes:[{base:0.25,id:movement_speed},{base:28,id:max_health},{base:15,id:"attack_damage"}],Health:28,Glowing:1b,Team:"green",active_effects:[{id:invisibility,duration:9999999,show_particles:0b,amplifier:0}],DeathLootTable:"",equipment:{chest:{components:{"minecraft:dyed_color":6192150},count:1,id:"minecraft:leather_chestplate"},feet:{components:{"minecraft:dyed_color":6192150},count:1,id:"minecraft:leather_boots"},head:{components:{"minecraft:custom_name":{extra:[{bold:0b,color:"blue",italic:0b,obfuscated:0b,strikethrough:0b,text:"Mushroom",underlined:0b}],text:""},"minecraft:profile":{id:[I;67411088,-739686879,-1666252800,-1431756647],name:"",properties:[{name:"textures",value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYmNjYTFkYmRiYzEwYTMzMDhkZmNiZWE3NDlhNWQ5ZDRiOWI1NDIzYThhN2U2YTgxYjljZjFmMDBmZmRkYTQ3ZiJ9fX0="}]}},count:1,id:"minecraft:player_head"},legs:{components:{"minecraft:dyed_color":6192150},count:1,id:"minecraft:leather_leggings"}},drop_chances:{body:0,chest:0,feet:0,head:0,legs:0,mainhand:0,offhand:0},Tags:["b2_s2_enemy"]} 
execute if score @n[tag=boss_2] boss.skill_timing matches 440 as @n[tag=boss_2] at @s run summon zombie ~ ~ ~4 {attributes:[{base:0.25,id:movement_speed},{base:28,id:max_health},{base:15,id:"attack_damage"}],Health:28,Glowing:1b,Team:"green",active_effects:[{id:invisibility,duration:9999999,show_particles:0b,amplifier:0}],DeathLootTable:"",equipment:{chest:{components:{"minecraft:dyed_color":6192150},count:1,id:"minecraft:leather_chestplate"},feet:{components:{"minecraft:dyed_color":6192150},count:1,id:"minecraft:leather_boots"},head:{components:{"minecraft:custom_name":{extra:[{bold:0b,color:"blue",italic:0b,obfuscated:0b,strikethrough:0b,text:"Mushroom",underlined:0b}],text:""},"minecraft:profile":{id:[I;67411088,-739686879,-1666252800,-1431756647],name:"",properties:[{name:"textures",value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYmNjYTFkYmRiYzEwYTMzMDhkZmNiZWE3NDlhNWQ5ZDRiOWI1NDIzYThhN2U2YTgxYjljZjFmMDBmZmRkYTQ3ZiJ9fX0="}]}},count:1,id:"minecraft:player_head"},legs:{components:{"minecraft:dyed_color":6192150},count:1,id:"minecraft:leather_leggings"}},drop_chances:{body:0,chest:0,feet:0,head:0,legs:0,mainhand:0,offhand:0},Tags:["b2_s2_enemy"]} 

effect give @a[scores={entity_y=..152}] speed 1 4 true
execute if score @n[tag=boss_2] boss.skill_timing matches 600 run function center_calculation:enemy_skill/boss_2/skill_3
execute if score @n[tag=boss_2] boss.skill_timing matches 740 run function center_calculation:enemy_skill/boss_2/skill_4

execute if entity @n[tag=b2_s4_dummy] as @a[scores={repeat_25_timing=10}] at @s run summon marker ~ ~ ~ {Tags:["enemy_skill","b2_s4_marker"]}
execute if entity @n[tag=b2_s4_dummy] as @a[scores={repeat_25_timing=10}] at @s run playsound item.trident.hit hostile @s ~ ~ ~
execute as @e[tag=b2_s4_marker] at @s run rotate @s ~6 ~
execute as @e[tag=b2_s4_marker] at @s run particle end_rod ^ ^ ^3 0 0 0 2 0 normal
execute as @e[tag=b2_s4_marker] at @s run particle end_rod ^ ^ ^-3 0 0 0 2 0 normal
execute as @e[tag=b2_s4_marker] at @s run particle end_rod ^-3 ^ ^ 0 0 0 2 0 normal
execute as @e[tag=b2_s4_marker] at @s run particle end_rod ^3 ^ ^ 0 0 0 2 0 normal

execute as @e[tag=b2_s4_marker,scores={enemy_skill=40..}] at @s run function center_calculation:enemy_skill/boss_2/s4_marker_effect
execute as @n[tag=boss_2] at @s run rotate @s ~2.7 ~

effect give @a night_vision 5 0 true